{"datasets":[{"name":"4edfc606","displayName":"books_transaction_table","query":"SELECT * FROM `lms-catalog`.gold.books_transaction_table\r\n"},{"name":"9b6769ae","displayName":"students_transaction_table","query":"SELECT * FROM `lms-catalog`.gold.students_transaction_table\r\n"},{"name":"e422a5d0","displayName":"Top Borrowing Students","query":"SELECT \r\n  student_id, \r\n  full_name, \r\n  COUNT(student_id) AS transaction_count,\r\n  DENSE_RANK() OVER (ORDER BY COUNT(student_id) DESC) AS rank\r\nFROM `lms-catalog`.gold.students_transaction_table\r\nGROUP BY student_id, full_name\r\nORDER BY rank;\r\n"},{"name":"834203fe","displayName":"Amount to be collected","query":"SELECT\r\n  SUM(fine_amount) AS total_fine_amount,\r\n  SUM(CASE WHEN payment_status != 'paid' THEN fine_amount ELSE 0 END) AS amount_to_be_collected\r\nFROM\r\n`lms-catalog`.gold.books_transaction_table"},{"name":"b9df4f1d","displayName":"Most borrowed books","query":"SELECT\r\n  book_id,\r\n  book_title,\r\n  COUNT(*) AS total_borrows,\r\n  dense_rank() OVER (ORDER BY COUNT(*) DESC) AS borrow_rank\r\nFROM\r\n  `lms-catalog`.gold.books_transaction_table\r\nGROUP BY\r\n  book_id, book_title\r\nORDER BY\r\n  total_borrows DESC;"},{"name":"2cb727d7","displayName":"Fines per book Title","query":"SELECT book_id, book_title, SUM(fine_amount) AS total_fine_amount\r\nFROM `lms-catalog`.gold.books_transaction_table\r\nGROUP BY book_id, book_title\r\nORDER BY total_fine_amount DESC\r\nlimit 10;"},{"name":"27dee294","displayName":"Overdue Books by Student Year","query":"SELECT student_year, COUNT(*) AS overdue_books\r\nFROM `lms-catalog`.gold.students_transaction_table\r\nWHERE return_date > due_date\r\nGROUP BY student_year;"},{"name":"79cde365","displayName":"Students with Unpaid Fines","query":"SELECT student_id, full_name, SUM(fine_amount) AS total_unpaid_fine\r\nFROM `lms-catalog`.gold.students_transaction_table\r\nWHERE payment_status == 'pending'\r\nGROUP BY student_id, full_name\r\norder by SUM(fine_amount)  desc\r\nlimit 10;"},{"name":"8379ce54","displayName":"Total Transaction","query":"select count(*) from `lms-catalog`.gold.students_transaction_table"},{"name":"9c5890bd","displayName":"Untitled dataset","query":"select student_id, full_name, count(student_id)\nfrom `lms-catalog`.gold.students_transaction_table\ngroup by student_id, full_name\norder by count(student_id) desc\nlimit 10;"}],"pages":[{"name":"2e4aae4a","displayName":"Books Dashboard","layout":[{"widget":{"name":"7b2ad1be","queries":[{"name":"dashboards/01efef739f9e1939b42483a8e608a2f3/datasets/01efef739f9f1f6c9a5501c710dd0e1e_issue_date","query":{"datasetName":"4edfc606","fields":[{"name":"issue_date","expression":"`issue_date`"},{"name":"issue_date_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-range-picker","encodings":{"fields":[{"fieldName":"issue_date","displayName":"issue_date","queryName":"dashboards/01efef739f9e1939b42483a8e608a2f3/datasets/01efef739f9f1f6c9a5501c710dd0e1e_issue_date"}]},"frame":{"showTitle":true,"title":"Select required Date","headerAlignment":"center"}}},"position":{"x":0,"y":0,"width":6,"height":2}},{"widget":{"name":"3c33e60e","queries":[{"name":"main_query","query":{"datasetName":"4edfc606","fields":[{"name":"countdistinct(copy_id)","expression":"COUNT(DISTINCT `copy_id`)"},{"name":"final_status","expression":"`final_status`"},{"name":"avg(fine_amount)","expression":"AVG(`fine_amount`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"pie","encodings":{"angle":{"fieldName":"countdistinct(copy_id)","scale":{"type":"quantitative"},"format":{"type":"number-plain","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"Count"},"color":{"fieldName":"final_status","scale":{"type":"categorical"},"displayName":"final_status"},"label":{"show":true},"extra":[{"fieldName":"avg(fine_amount)","displayName":"Average fine_amount"}]},"frame":{"title":"Books by Status","showTitle":true,"headerAlignment":"center"}}},"position":{"x":4,"y":4,"width":2,"height":6}},{"widget":{"name":"962736ab","queries":[{"name":"main_query","query":{"datasetName":"4edfc606","fields":[{"name":"department","expression":"`department`"},{"name":"sum(book_price)","expression":"SUM(`book_price`)"},{"name":"countdistinct(copy_id)","expression":"COUNT(DISTINCT `copy_id`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"department","scale":{"type":"categorical","sort":{"by":"y-reversed"}},"displayName":"department"},"y":{"fieldName":"countdistinct(copy_id)","scale":{"type":"quantitative"},"displayName":"No. of Copies"},"color":{"fieldName":"department","scale":{"type":"categorical"},"displayName":"department"},"label":{"show":true},"extra":[{"fieldName":"sum(book_price)","displayName":"Sum of book_price"}]},"frame":{"title":"Books by Department","showTitle":true,"headerAlignment":"center"}}},"position":{"x":0,"y":4,"width":4,"height":6}},{"widget":{"name":"1206ad84","queries":[{"name":"main_query","query":{"datasetName":"4edfc606","fields":[{"name":"weekly(issue_date)","expression":"DATE_TRUNC(\"WEEK\", `issue_date`)"},{"name":"count(transaction_id)","expression":"COUNT(`transaction_id`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"line","encodings":{"x":{"fieldName":"weekly(issue_date)","scale":{"type":"temporal"},"displayName":"issue_date"},"y":{"fieldName":"count(transaction_id)","scale":{"type":"quantitative"},"displayName":"No.of Transactions"},"label":{"show":false}},"frame":{"showTitle":true,"headerAlignment":"center","title":"Transactions per week"},"mark":{"colors":["#2cea38","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":0,"y":10,"width":6,"height":6}},{"widget":{"name":"87de11a1","queries":[{"name":"main_query","query":{"datasetName":"4edfc606","fields":[{"name":"count(transaction_id)","expression":"COUNT(`transaction_id`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"count(transaction_id)","displayName":"Count of transaction_id"}},"frame":{"showTitle":true,"title":"Total Transactions","headerAlignment":"center"}}},"position":{"x":0,"y":2,"width":2,"height":2}},{"widget":{"name":"b0a5b847","queries":[{"name":"main_query","query":{"datasetName":"4edfc606","fields":[{"name":"avg(fine_amount)","expression":"AVG(`fine_amount`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"avg(fine_amount)","displayName":"Average fine_amount"}},"frame":{"title":"Average Fine Amount","showTitle":true,"headerAlignment":"center","showDescription":false}}},"position":{"x":4,"y":2,"width":2,"height":2}},{"widget":{"name":"57c90169","queries":[{"name":"main_query","query":{"datasetName":"4edfc606","fields":[{"name":"department","expression":"`department`"},{"name":"avg(fine_amount)","expression":"AVG(`fine_amount`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"line","encodings":{"x":{"fieldName":"department","scale":{"type":"categorical"},"displayName":"department"},"y":{"fieldName":"avg(fine_amount)","scale":{"type":"quantitative"},"displayName":"Avg Fine Amount"},"label":{"show":true}},"frame":{"headerAlignment":"center","title":"Average Fine Amount by Department","showTitle":true},"mark":{"colors":["#98079d","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":0,"y":16,"width":3,"height":6}},{"widget":{"name":"26922af1","queries":[{"name":"main_query","query":{"datasetName":"4edfc606","fields":[{"name":"countdistinct(copy_id)","expression":"COUNT(DISTINCT `copy_id`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"countdistinct(copy_id)","displayName":"Count of Unique copy_id"}},"frame":{"showTitle":true,"headerAlignment":"center","title":"Total Copies","showDescription":false}}},"position":{"x":2,"y":2,"width":2,"height":2}},{"widget":{"name":"0dfb1ca0","queries":[{"name":"main_query","query":{"datasetName":"b9df4f1d","fields":[{"name":"book_title","expression":"`book_title`"},{"name":"borrow_rank","expression":"`borrow_rank`"},{"name":"total_borrows","expression":"`total_borrows`"}],"filters":[{"expression":"`borrow_rank` IN (1, 2, 3, 4, 5)"}],"disaggregated":true}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"book_title","scale":{"type":"categorical","sort":{"by":"y-reversed"}},"axis":{"hideLabels":true},"displayName":"book_title"},"y":{"fieldName":"total_borrows","scale":{"type":"quantitative"},"axis":{},"displayName":"total_borrows"},"color":{"fieldName":"book_title","scale":{"type":"categorical"},"legend":{"hideTitle":true},"displayName":"book_title"},"label":{"show":true},"extra":[{"fieldName":"borrow_rank","displayName":"borrow_rank"}]},"frame":{"headerAlignment":"center","title":"Most Borrowed Books","showTitle":true}}},"position":{"x":3,"y":16,"width":3,"height":6}}]},{"name":"3600a64c","displayName":"Students Dashboard","layout":[{"widget":{"name":"8a4e5ab4","queries":[{"name":"dashboards/01efef739f9e1939b42483a8e608a2f3/datasets/01efef739fa010438e322637bfd357e9_daily(issue_date)","query":{"datasetName":"9b6769ae","fields":[{"name":"daily(issue_date)","expression":"DATE_TRUNC(\"DAY\", `issue_date`)"},{"name":"daily(issue_date)_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-range-picker","encodings":{"fields":[{"fieldName":"daily(issue_date)","displayName":"issue_date","queryName":"dashboards/01efef739f9e1939b42483a8e608a2f3/datasets/01efef739fa010438e322637bfd357e9_daily(issue_date)"}]},"frame":{"showTitle":true,"title":"Select required date"}}},"position":{"x":0,"y":0,"width":6,"height":2}},{"widget":{"name":"2acffa72","queries":[{"name":"main_query","query":{"datasetName":"e422a5d0","fields":[{"name":"full_name","expression":"`full_name`"},{"name":"student_id","expression":"`student_id`"},{"name":"sum(transaction_count)","expression":"SUM(`transaction_count`)"}],"filters":[{"expression":"`rank` IN (1, 2, 3, 4, 5)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"full_name","axis":{},"scale":{"type":"categorical","sort":{"by":"y-reversed"}},"displayName":"full_name"},"y":{"fieldName":"sum(transaction_count)","scale":{"type":"quantitative"},"displayName":"Sum of transaction_count"},"color":{"fieldName":"full_name","scale":{"type":"categorical"},"legend":{"hide":true},"displayName":"full_name"},"label":{"show":true},"extra":[{"fieldName":"student_id","displayName":"student_id"}]},"frame":{"headerAlignment":"center","title":"Most Frequent Borrowers","showTitle":true}}},"position":{"x":0,"y":2,"width":4,"height":8}},{"widget":{"name":"5787f81f","queries":[{"name":"main_query","query":{"datasetName":"9b6769ae","fields":[{"name":"count(transaction_id)","expression":"COUNT(`transaction_id`)"},{"name":"payment_status","expression":"`payment_status`"},{"name":"sum(fine_amount)","expression":"SUM(`fine_amount`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"pie","encodings":{"angle":{"fieldName":"count(transaction_id)","scale":{"type":"quantitative"},"displayName":"Count of transaction_id"},"color":{"fieldName":"payment_status","scale":{"type":"categorical","mappings":[{"value":"not available","color":"#8e079d"},{"value":"paid","color":"#a2ff00"},{"value":"pending","color":"#f61132"}]},"displayName":"payment_status"},"label":{"show":true},"extra":[{"fieldName":"sum(fine_amount)","displayName":"Fine amount"}]},"frame":{"title":"Payment Status Distribution","showTitle":true}}},"position":{"x":4,"y":6,"width":2,"height":6}},{"widget":{"name":"b1dfc98d","queries":[{"name":"main_query","query":{"datasetName":"27dee294","fields":[{"name":"student_year","expression":"`student_year`"},{"name":"overdue_books","expression":"`overdue_books`"}],"disaggregated":true}}],"spec":{"version":3,"widgetType":"pie","encodings":{"angle":{"fieldName":"student_year","scale":{"type":"quantitative"},"displayName":"student_year"},"color":{"fieldName":"student_year","scale":{"type":"quantitative","colorRamp":{"mode":"scheme","scheme":"viridis"}},"legend":{"hideTitle":true,"hide":false,"position":"right"},"displayName":"student_year"},"label":{"show":true},"extra":[{"fieldName":"overdue_books","displayName":"overdue_books"}]},"frame":{"showTitle":true,"headerAlignment":"center","title":"Overdue Books by Student Year"}}},"position":{"x":4,"y":12,"width":2,"height":6}},{"widget":{"name":"d25907f0","queries":[{"name":"main_query","query":{"datasetName":"834203fe","fields":[{"name":"total_fine_amount","expression":"`total_fine_amount`"},{"name":"amount_to_be_collected","expression":"`amount_to_be_collected`"}],"disaggregated":true}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"amount_to_be_collected","displayName":"amount_to_be_collected"},"target":{"fieldName":"total_fine_amount","displayName":"total_fine_amount"}},"frame":{"showTitle":true,"headerAlignment":"center","title":"Amount to be collected"}}},"position":{"x":4,"y":4,"width":2,"height":2}},{"widget":{"name":"28feaa82","queries":[{"name":"main_query","query":{"datasetName":"79cde365","fields":[{"name":"full_name","expression":"`full_name`"},{"name":"sum(total_unpaid_fine)","expression":"SUM(`total_unpaid_fine`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"line","encodings":{"x":{"fieldName":"full_name","scale":{"type":"categorical"},"displayName":"full_name"},"y":{"fieldName":"sum(total_unpaid_fine)","scale":{"type":"quantitative"},"displayName":"Sum of total_unpaid_fine"},"label":{"show":true}},"frame":{"showTitle":true,"headerAlignment":"center","title":"Students with unpaid amount"},"mark":{"colors":["#079d0a","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":0,"y":10,"width":4,"height":8}},{"widget":{"name":"ac783d42","queries":[{"name":"main_query","query":{"datasetName":"4edfc606","fields":[{"name":"avg(fine_amount)","expression":"AVG(`fine_amount`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"avg(fine_amount)","displayName":"Average fine_amount"}},"frame":{"title":"Average Fine Amount","showTitle":true,"headerAlignment":"center","showDescription":false}}},"position":{"x":4,"y":2,"width":2,"height":2}}]}]}